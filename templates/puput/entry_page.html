{% extends 'puput/base.html' %}
{% load static i18n humanize wagtailcore_tags wagtailimages_tags puput_tags %}
{% block title %}
    {{ self.title }} | {{ blog_self.title }}
{% endblock title %}
{% block meta_title %}
    {% if self.seo_title %}
        {{ self.seo_title }}
    {% else %}
        {{ self.title }}
    {% endif %}
{% endblock meta_title %}
{% block meta_description %}
    {% if self.search_description %}
        {{ self.search_description }}
    {% else %}
        {{ self.body|striptags|truncatewords:20 }}
    {% endif %}
{% endblock meta_description %}
{% block canonical %}
    {% canonical_url entry=self %}
{% endblock canonical %}
{% block social_share %}
    {% image self.header_image fill-800x450 as share_image %}
    <meta property="og:title" content="{{ self.title }}" />
    <meta property="og:description"
          content="{% if self.excerpt %}
                       {{ self.excerpt|striptags }}
                   {% else %}
                       {{ self.body|striptags|truncatewords:20 }}
                   {% endif %}" />
    <meta property="og:url" content="{% canonical_url entry=self %}" />
    {% if self.header_image %}
        <meta property="og:image" content="{% image_url share_image.url %}" />
        <meta property="og:image:width" content="800" />
        <meta property="og:image:height" content="450" />
        <meta name="twitter:image" content="{% image_url share_image.url %}" />
    {% endif %}
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="{{ self.title }}" />
    <meta name="twitter:description"
          content="{% if self.excerpt %}
                       {{ self.excerpt|striptags }}
                   {% else %}
                       {{ self.body|striptags|truncatewords:20 }}
                   {% endif %}" />
{% endblock social_share %}
{% block blog_content %}
    <div class="blog-details">
        <div class="global-shape style-3">
            <img src="{% static 'peredion/images/shapes/shape-1.png' %}"
                 alt=""
                 data-aos="fade-left"
                 data-aos-duration="500"
                 data-aos-offset="200"
                 data-aos-easing="ease-in"
                 data-aos-delay="400"
                 nonce="{{ request.csp_nonce }}">
        </div>
        <div class="container">
            <article class="post-element">
                <div class="post-stats"
                     data-aos="fade-up"
                     data-aos-delay="100"
                     data-aos-duration="500"
                     data-aos-easing="ease-in">
                    {% for category in categories %}
                        <a class="category-name"
                           href="{% routablepageurl blog_page 'entries_by_category' category.slug %}">{{ self.category.name }}</a>
                    {% endfor %}
                    <span class="posted-time">{{ self.date|naturalday }}</span>
                </div>
                <h2 class="post-title"
                    data-aos="fade-up"
                    data-aos-delay="150"
                    data-aos-duration="500"
                    data-aos-easing="ease-in">
                    <span>{{ self.title }}</span>
                </h2>
                <a class="author-info d-block"
                   href="{% routablepageurl blog_page 'entries_by_author' entry.owner.username %}"
                   data-aos="fade-up"
                   data-aos-delay="200"
                   data-aos-duration="500"
                   data-aos-easing="ease-in">
                    <div class="author-pic">
                        {% comment %}
                            TODO: user profile pic
                            <img src="{% static 'peredion/images/blog/blog-details-user-1.jpg' %}" alt="" nonce="{{ request.csp_nonce }}">
                        {% endcomment %}
                    </div>
                    <div class="author-descr">
                        <span class="auth-name">{{ self.owner.username }}</span>
                        {% comment %}
                            TODO: author role, maybe?
                            <span class="break-icon">/</span>
                            <span class="auth-designation">Business analytics</span>
                        {% endcomment %}
                    </div>
                </a>
                {% if self.header_image %}
                    <div class="post-img"
                         data-aos="fade-up"
                         data-aos-delay="250"
                         data-aos-duration="500"
                         data-aos-easing="ease-in">
                        {% image self.header_image fill-1200x600 as header_image %}
                        <img alt="{{ self.header_image.title }}"
                             src="{{ header_image.url }}"
                             nonce="{{ request.csp_nonce }}">
                    </div>
                {% endif %}
                <div class="post-body">{{ self.body|richtext }}</div>
            </article>
            <div class="post-comment-element">
                <form class="post-comment-form"
                      data-aos="fade-up"
                      data-aos-delay="550"
                      data-aos-duration="500"
                      data-aos-easing="ease-in">
                    <div class="commentor-pic">
                        {# TODO: real profile image should go here #}
                        <img src="{% static 'peredion/images/blog/random-user.png' %}" alt="">
                    </div>
                    <div class="part-form">
                        <form>
                            <input type="text" placeholder="{% trans 'Write something...' %}">
                            <button type="submit">
                                <i class="fa-solid fa-feather"></i>
                            </button>
                        </form>
                    </div>
                </form>
                <div class="all-comments"
                     data-aos="fade-up"
                     data-aos-delay="600"
                     data-aos-duration="500"
                     data-aos-easing="ease-in">
                    <h4 class="element-titl">
                        <span>{% trans 'All comments' %} ({{ comments|length }})</span>
                    </h4>
                    <div>
                        {% for comment in self.comments %}
                            <div class="single-comment">
                                <div class="commentor-pic">
                                    {# TODO: real profile image should go here #}
                                    <img src="{% static 'peredion/images/blog/random-user.png' %}" alt="">
                                </div>
                                <div class="part-comment-info">
                                    <div class="comment-stats">
                                        <span class="commentator-name">{{ comment.author }}</span>
                                        <span class="commented-time">{{ comment.date|naturalday }}</span>
                                    </div>
                                    <p>{{ comment.content }}</p>
                                    <div class="comment-into-social">
                                        <a href="#0" class="single-social love-reaction">
                                            <span class="icon love-icon"><i class="fa-solid fa-heart"></i></span>
                                            <span class="social-text loved-number">18</span>
                                        </a>
                                        <a href="#0" class="single-social">
                                            <span class="icon comment-icon"><i class="fa-solid fa-comment"></i></span>
                                            <span class="social-text">Comment</span>
                                        </a>
                                        <a href="#0" class="single-social">
                                            <span class="icon share-icon"><i class="fa-solid fa-paper-plane"></i></span>
                                            <span class="social-text">Share</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="recommended-post-element"
                 data-aos="fade-up"
                 data-aos-delay="550"
                 data-aos-duration="500"
                 data-aos-easing="ease-in">
                <h4 class="element-title">
                    <span>Recommended articles</span>
                </h4>
                <div class="recommended-post-slider owl-carousel owl-theme">
                    <div class="single-blog">
                        <div class="part-img">
                            <img src="{% static 'peredion/images/blog/blog-post-1.jpg" alt="">
                        </div>
                        <div class="part-text">
                            <span class="post-category">euro jackpot</span>
                            <h3 class="blog-post-title">
                                <a href="blog-details.html">Even more and setted see.</a>
                            </h3>
                            <div class="post-info-stats">
                                <a href="#0" class="post-creator">
                                    <div class="creator-pic">
                                        <img src="{% static 'peredion/images/blog/user-1.jpg" alt="">
                                    </div>
                                    <span class="creator-name">Sierra Guzman</span>
                                </a>
                                <span class="posting-time">3 days ago</span>
                            </div>
                        </div>
                    </div>
                    <div class="single-blog">
                        <div class="part-img">
                            <img src="{% static 'peredion/images/blog/blog-post-3.jpg" alt="">
                        </div>
                        <div class="part-text">
                            <span class="post-category">mega millions</span>
                            <h3 class="blog-post-title">
                                <a href="blog-details.html">Began a need detailed free.</a>
                            </h3>
                            <div class="post-info-stats">
                                <a href="#0" class="post-creator">
                                    <div class="creator-pic">
                                        <img src="{% static 'peredion/images/blog/user-3.jpg" alt="">
                                    </div>
                                    <span class="creator-name">Peter Bowen</span>
                                </a>
                                <span class="posting-time">2 days ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
