{% extends 'base.html' %}
{% load static i18n partials honeypot %}
{% partialdef form-submitted %}
<div class="text-center py-5">
    <div class="mb-3">
        <i class="bi bi-check-circle-fill text-success" style="font-size: 3rem;"></i>
    </div>
    <h3 class="fw-semibold mb-3">{% trans 'Thank you!' %}</h3>
    <p class="lead mb-4">{% trans "Your message has been sent successfully. We'll be in touch soon!" %}</p>
    <p class="text-muted small">
        {% trans 'If you need to reach us urgently, please use the contact details provided below.' %}
    </p>
</div>
{% endpartialdef %}
{% block modal %}
    <div class="modal fade"
         id="contact-success-modal"
         tabindex="-1"
         aria-labelledby="contactSuccessModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contactSuccessModalLabel">&#x1F973; {% trans 'Thanks for reaching out!' %}</h5>
                    <button type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="{% trans 'Close' %}"></button>
                </div>
                <div class="modal-body">
                    <p>{% trans "Your message has been received. We'll get back to you soon." %}</p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block content %}
    <div class="contact-us">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-xl-8 col-lg-8">
                    <div class="part-contact poklotto-form"
                         data-aos="fade-up"
                         data-aos-delay="100"
                         data-aos-duration="500"
                         data-aos-easing="ease-in">
                        <h3 class="title">{% trans 'Get in touch with us' %}</h3>
                        <div class="part-form">
                            <form id="contact-form"
                                  action="{% url 'contact' %}"
                                  method="post"
                                  hx-boost="true"
                                  hx-target="find .form-fields"
                                  @submit="submitting = true;"
                                  @htmx:after-on-load="submitting = false;"
                                  x-data="{ submitting: false }">
                                {% csrf_token %}
                                {% render_honeypot_field "phone" %}
                                <div class="form-fields">{% include 'peredion/forms/contact_form.html' %}</div>
                                <button type="submit" class="prd-btn-1" :disabled="submitting">
                                    <span x-show="submitting">
                                        {% trans 'submitting...' %} <i class="spinner-border spinner-border-sm"
    role="status"
    aria-hidden="true"></i>
                                    </span>
                                    <span x-show="!submitting">
                                        {% trans 'submit' %} <i class="fa-solid fa-arrow-right"></i>
                                    </span>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-4 col-md-9 col-sm-9 d-xl-flex d-lg-flex d-block align-items-end"
                     data-aos="fade-up"
                     data-aos-delay="300"
                     data-aos-duration="500"
                     data-aos-easing="ease-in"
                     style="z-index: 55">
                    <div class="part-img">
                        <img src="{% static 'peredion/images/contact/contact-img.png' %}"
                             alt=""
                             nonce="{{ request.csp_nonce }}">
                    </div>
                </div>
            </div>
        </div>
        <div class="part-address">
            <div class="bg"></div>
            <div class="container">
                <div class="address-elements"
                     data-aos="fade-up"
                     data-aos-delay="100"
                     data-aos-duration="500"
                     data-aos-easing="ease-in">
                    <div class="single-element">
                        <h4 class="title">{% trans 'phone' %}</h4>
                        <ul>
                            <li>TODO</li>
                        </ul>
                    </div>
                    <div class="single-element"
                         data-aos="fade-up"
                         data-aos-delay="150"
                         data-aos-duration="500"
                         data-aos-easing="ease-in">
                        <h4 class="title">{% trans 'email' %}</h4>
                        <ul>
                            <li>TODO</li>
                        </ul>
                    </div>
                    <div class="single-element"
                         data-aos="fade-up"
                         data-aos-delay="200"
                         data-aos-duration="500"
                         data-aos-easing="ease-in">
                        <h4 class="title">{% trans 'head office' %}</h4>
                        <ul>
                            <li>TODO</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- newsletter begin -->
    <div class="newsletter">
        <div class="global-shape"
             data-aos="fade-left"
             data-aos-duration="700"
             data-aos-delay="200">
            <img src="{% static 'peredion/images/shapes/shape-1.png' %}"
                 alt=""
                 nonce="{{ request.csp_nonce }}">
        </div>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-xxl-5 col-xl-6 col-lg-6 col-md-12 col-sm-12 d-xl-flex d-lg-flex d-block align-items-end order-lg-first order-2">
                    <div class="part-img">
                        <img src="{% static 'peredion/images/newsletter/newsletter-img-bg.png' %}"
                             alt=""
                             class="bg"
                             data-aos="fade-up"
                             data-aos-delay="150"
                             data-aos-duration="500"
                             data-aos-easing="ease-in"
                             nonce="{{ request.csp_nonce }}">
                        <img src="{% static 'peredion/images/newsletter/newsletter-img.png' %}"
                             alt=""
                             class="main-img"
                             data-aos="fade-up"
                             data-aos-delay="300"
                             data-aos-duration="500"
                             data-aos-easing="ease-in"
                             nonce="{{ request.csp_nonce }}">
                    </div>
                </div>
                <div class="col-xxl-7 col-xl-6 col-lg-6 col-md-8 col-sm-10 d-xl-flex d-lg-flex d-block align-items-center">
                    <div class="part-newsletter">
                        <div class="section-title"
                             data-aos="fade-up"
                             data-aos-delay="100"
                             data-aos-duration="500"
                             data-aos-easing="ease-in">
                            <h3 class="sub-title">{% trans 'get our newsletter' %}</h3>
                            <h2 class="title">{% trans 'Stay Tuned with Us' %}</h2>
                        </div>
                        <p data-aos="fade-up"
                           data-aos-delay="200"
                           data-aos-duration="500"
                           data-aos-easing="ease-in">
                            {% blocktrans %}
                                Subscribe to <span class="p-bold">Game-on-Lock</span>'s newsletter and never miss
                                <br />
                                our latest business newses.
                                Our newsletter is sent once a week, every monday.
                            {% endblocktrans %}
                        </p>
                        <form action="TODO"
                              method="post"
                              data-aos="fade-up"
                              data-aos-delay="250"
                              data-aos-duration="500"
                              data-aos-easing="ease-in">
                            <input type="text" placeholder="{% trans 'Ex: yourmail@address.com' %}">
                            <button type="submit" class="prd-btn-1 submit-btn">
                                {% trans 'Subscribe' %} <i class="fa-sharp fa-solid fa-paper-plane"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- newsletter end -->
{% endblock %}
{% block js %}
    {{ block.super }}
    <script src="{% static 'js/confetti.browser.min.js' %}"
            nonce="{{ request.csp_nonce }}"></script>
    <script nonce="{{ request.csp_nonce }}">
      document.body.addEventListener("contactSuccess", function () {
        var modalEl = document.getElementById("contact-success-modal");
        var modal = new bootstrap.Modal(modalEl);
        modal.show();
    
        if (window.confetti) {
          confetti({
            particleCount: 150,
            spread: 70,
            origin: { y: 0.6 }
          });
        }
    
        const form = document.querySelector("#contact-form");
        if (form) form.reset();
      });
    </script>
{% endblock %}
